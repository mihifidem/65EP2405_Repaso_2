<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Constructor de URL (hasta equipo) – Transfermarkt</title>
  <style>
    body { font-family: Arial, sans-serif; padding:20px; background:#f4f4f4; }
    .wrap { max-width:600px; margin:auto; background:#fff; padding:20px; border-radius:8px; }
    label { display:block; margin:12px 0 4px; }
    select { width:100%; padding:8px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h2>Selecciona País → Liga → Equipo</h2>
    <label for="country">País</label>
    <select id="country">
      <option value="" selected disabled>Selecciona país…</option>
      <option value="es">España</option>
      <option value="de">Alemania</option>
      <option value="it">Italia</option>
      <option value="uk">Reino Unido</option>
      <!-- añade más países según necesidad -->
    </select>

    <label for="league">Liga</label>
    <select id="league" disabled>
      <option value="" selected disabled>Selecciona liga…</option>
    </select>

    <label for="team">Equipo</label>
    <select id="team" disabled>
      <option value="" selected disabled>Selecciona equipo…</option>
    </select>

    <div style="margin-top:20px;">
      <label for="resultUrl">URL generada (hasta equipo):</label>
      <input type="text" id="resultUrl" readonly style="width:100%; padding:8px;" placeholder="Aquí aparecerá la URL…">
    </div>
  </div>

  <script>
    // Datos de ejemplo hasta equipo
    const DATA = [
      {
        countryCode: "es",
        domain: "es",
        leagues: [
          {
            name: "LaLiga (Primera División)",
            slug: "primera-division",
            code: "ES1",
            teams: [
              { name: "FC Barcelona", slug: "fc-barcelona", id: 131 },
              { name: "Real Madrid", slug: "real-madrid", id: 418 }
            ]
          },
          {
            name: "LaLiga2 (Segunda División)",
            slug: "segunda-division",
            code: "ES2",
            teams: [
              { name: "UD Las Palmas", slug: "ud-las-palmas", id: 472 },
              { name: "Real Zaragoza", slug: "real-zaragoza", id: 142 }
            ]
          }
        ]
      },
      {
        countryCode: "de",
        domain: "de",
        leagues: [
          {
            name: "Bundesliga",
            slug: "bundesliga",
            code: "BL1",
            teams: [
              { name: "FC Bayern München", slug: "fc-bayern‐muenchen", id: 27 },
              { name: "Borussia Dortmund", slug: "borussia-dortmund", id: 16 }
            ]
          }
        ]
      },
      {
        countryCode: "it",
        domain: "it",
        leagues: [
          {
            name: "Serie A",
            slug: "serie-a",
            code: "IT1",
            teams: [
              { name: "Juventus", slug: "juventus", id: 506 },
              { name: "AC Milan", slug: "ac-milan", id: 603 }
            ]
          }
        ]
      },
      {
        countryCode: "uk",
        domain: "uk",  // ejemplo genérico
        leagues: [
          {
            name: "Premier League",
            slug: "premier-league",
            code: "GB1",
            teams: [
              { name: "Manchester United", slug: "manchester-united", id: 985 },
              { name: "Liverpool FC", slug: "liverpool-fc", id: 31 }
            ]
          }
        ]
      }
    ];

    const countrySel = document.getElementById("country");
    const leagueSel  = document.getElementById("league");
    const teamSel    = document.getElementById("team");
    const resultUrl  = document.getElementById("resultUrl");

    function clearSelect(select, placeholder) {
      select.innerHTML = `<option value="" selected disabled>${placeholder}</option>`;
      select.disabled = true;
    }

    function fillSelect(select, items, valueFn, textFn) {
      clearSelect(select, "Selecciona…");
      items.forEach(it => {
        const opt = document.createElement("option");
        opt.value = valueFn(it);
        opt.textContent = textFn(it);
        opt.dataset.json = JSON.stringify(it);
        select.appendChild(opt);
      });
      select.disabled = false;
    }

    function getSelectedData(select) {
      const opt = select.options[select.selectedIndex];
      if (!opt || !opt.dataset.json) return null;
      return JSON.parse(opt.dataset.json);
    }

    // esto cuando cambia país
    countrySel.addEventListener("change", () => {
      const cCode = countrySel.value;
      const country = DATA.find(c => c.countryCode === cCode);
      if (!country) {
        clearSelect(leagueSel, "Selecciona liga…");
        clearSelect(teamSel, "Selecciona equipo…");
        updateUrl();
        return;
      }
      fillSelect(
        leagueSel,
        country.leagues,
        l => l.code,
        l => l.name
      );
      clearSelect(teamSel, "Selecciona equipo…");
      updateUrl();
    });

    // esto cuando cambia liga
    leagueSel.addEventListener("change", () => {
      const country = DATA.find(c => c.countryCode === countrySel.value);
      const league  = getSelectedData(leagueSel);
      if (!country || !league) {
        clearSelect(teamSel, "Selecciona equipo…");
        updateUrl();
        return;
      }
      fillSelect(
        teamSel,
        league.teams,
        t => t.id,
        t => t.name
      );
      updateUrl();
    });

    // esto es cuando cambia equipo
    teamSel.addEventListener("change", updateUrl);

    function updateUrl() {
      const country = DATA.find(c => c.countryCode === countrySel.value);
      const league  = getSelectedData(leagueSel);
      const team    = getSelectedData(teamSel);

      if (country && league && team) {
        // construimos URL: https://www.transfermarkt.{domain}/{teamSlug}/startseite/verein/{teamId}
        const url = `https://www.transfermarkt.${country.domain}/${team.slug}/startseite/verein/${team.id}`;
        resultUrl.value = url;
      } else {
        resultUrl.value = "";
      }
    }

    // Inicializar
    clearSelect(leagueSel, "Selecciona liga…");
    clearSelect(teamSel, "Selecciona equipo…");
  </script>
</body>
</html>
